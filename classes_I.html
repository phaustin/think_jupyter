

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Classes and objects &#8212; How to think like a computer scientist</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/sphinx-book-theme.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/mystnb.js"></script>
    <script src="_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .secondtoggle, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Classes and functions" href="classes_II.html" />
    <link rel="prev" title="Files" href="files.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">How to think like a computer scientist</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="preface.html">Preface  – work in progress, cross-references/figures to be added</a>
  </li>
  <li class="">
    <a href="intro.html">Introduction</a>
  </li>
  <li class="">
    <a href="way_of.html">The way of the program</a>
  </li>
  <li class="">
    <a href="variables.html">Variables, expressions and statements</a>
  </li>
  <li class="">
    <a href="functions.html">Functions</a>
  </li>
  <li class="">
    <a href="case_study_interface.html">Case study: interface design</a>
  </li>
  <li class="">
    <a href="conditionals.html">Conditionals and recursion</a>
  </li>
  <li class="">
    <a href="fruitful_functions.html">Fruitful functions</a>
  </li>
  <li class="">
    <a href="iteration.html">Iteration</a>
  </li>
  <li class="">
    <a href="strings.html">Strings</a>
  </li>
  <li class="">
    <a href="case_study_wordplay.html">Case study: word play</a>
  </li>
  <li class="">
    <a href="lists.html">Lists</a>
  </li>
  <li class="">
    <a href="dictionaries.html">Dictionaries</a>
  </li>
  <li class="">
    <a href="tuples.html">Tuples</a>
  </li>
  <li class="">
    <a href="case_study_data_structures.html">Case study: data structure selection</a>
  </li>
  <li class="">
    <a href="files.html">Files</a>
  </li>
  <li class="active">
    <a href="">Classes and objects</a>
  </li>
  <li class="">
    <a href="classes_II.html">Classes and functions</a>
  </li>
  <li class="">
    <a href="classes_III.html">Classes and methods</a>
  </li>
  <li class="">
    <a href="classes_IV.html">Inheritance</a>
  </li>
  <li class="">
    <a href="advanced.html">The Goodies</a>
  </li>
  <li class="">
    <a href="debugging.html">Debugging</a>
  </li>
  <li class="">
    <a href="algorithms.html">Analysis of Algorithms</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse" data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation" title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
            <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i class="fas fa-download"></i></button>

            
            <div class="dropdown-buttons">
                <!-- ipynb file if we had a myst markdown file -->
                
                <!-- Download raw file -->
                <a class="dropdown-buttons" href="_sources/classes_I.md"><button type="button" class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip" data-placement="left">.md</button></a>
                <!-- Download PDF via print -->
                <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF" onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
            </div>
            
        </div>

        <!-- Edit this page -->
        

        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->
        
    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#programmer-defined-types" class="nav-link">Programmer-defined types</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#attributes" class="nav-link">Attributes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#rectangles" class="nav-link">Rectangles</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#instances-as-return-values" class="nav-link">Instances as return values</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#objects-are-mutable" class="nav-link">Objects are mutable</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#copying" class="nav-link">Copying</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#debugging" class="nav-link">Debugging</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#glossary" class="nav-link">Glossary</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#exercises" class="nav-link">Exercises</a>
        </li>
    
    </ul>
</nav>


    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="classes-and-objects">
<h1>Classes and objects<a class="headerlink" href="#classes-and-objects" title="Permalink to this headline">¶</a></h1>
<p>At this point you know how to use functions to organize code and
built-in types to organize data. The next step is to learn
“object-oriented programming”, which uses programmer-defined types to
organize both code and data. Object-oriented programming is a big topic;
it will take a few chapters to get there.</p>
<p>Code examples from this chapter are available from
<a class="reference external" href="http://thinkpython2.com/code/Point1.py">http://thinkpython2.com/code/Point1.py</a>; solutions to the exercises are
available from <a class="reference external" href="http://thinkpython2.com/code/Point1_soln.py">http://thinkpython2.com/code/Point1_soln.py</a>.</p>
<div class="section" id="programmer-defined-types">
<h2>Programmer-defined types<a class="headerlink" href="#programmer-defined-types" title="Permalink to this headline">¶</a></h2>
<p>We have used many of Python’s built-in types; now we are going to define
a new type. As an example, we will create a type called
<span><code class="docutils literal notranslate"><span class="pre">Point</span></code></span> that represents a point in two-dimensional space.</p>
<p>In mathematical notation, points are often written in parentheses with a
comma separating the coordinates. For example, ((0,0)) represents the
origin, and ((x,y)) represents the point (x) units to the right and
(y) units up from the origin.</p>
<p>There are several ways we might represent points in Python:</p>
<ul class="simple">
<li><p>We could store the coordinates separately in two variables,
<span><code class="docutils literal notranslate"><span class="pre">x</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">y</span></code></span>.</p></li>
<li><p>We could store the coordinates as elements in a list or tuple.</p></li>
<li><p>We could create a new type to represent points as objects.</p></li>
</ul>
<p>Creating a new type is more complicated than the other options, but it
has advantages that will be apparent soon.</p>
<p>A programmer-defined type is also called a <span><strong>class</strong></span>. A
class definition looks like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>class Point:
    &quot;&quot;&quot;Represents a point in 2-D space.&quot;&quot;&quot;
</pre></div>
</div>
<p>The header indicates that the new class is called <span><code class="docutils literal notranslate"><span class="pre">Point</span></code></span>.
The body is a docstring that explains what the class is for. You can
define variables and methods inside a class definition, but we will get
back to that later.</p>
<p>Defining a class named <span><code class="docutils literal notranslate"><span class="pre">Point</span></code></span> creates a <span><strong>class
object</strong></span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; Point
&lt;class &#39;__main__.Point&#39;&gt;
</pre></div>
</div>
<p>Because <span><code class="docutils literal notranslate"><span class="pre">Point</span></code></span> is defined at the top level, its “full
name” is <code class="docutils literal notranslate"><span class="pre">__main__.Point</span></code>.</p>
<p>The class object is like a factory for creating objects. To create a
Point, you call <span><code class="docutils literal notranslate"><span class="pre">Point</span></code></span> as if it were a function.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; blank = Point()
&gt;&gt;&gt; blank
&lt;__main__.Point object at 0xb7e9d3ac&gt;
</pre></div>
</div>
<p>The return value is a reference to a Point object, which we assign to
<span><code class="docutils literal notranslate"><span class="pre">blank</span></code></span>.</p>
<p>Creating a new object is called <span><strong>instantiation</strong></span>, and the
object is an <span><strong>instance</strong></span> of the class.</p>
<p>When you print an instance, Python tells you what class it belongs to
and where it is stored in memory (the prefix <span><code class="docutils literal notranslate"><span class="pre">0x</span></code></span> means
that the following number is in hexadecimal).</p>
<p>Every object is an instance of some class, so “object” and “instance”
are interchangeable. But in this chapter I use “instance” to indicate
that I am talking about a programmer-defined type.</p>
</div>
<div class="section" id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h2>
<p>You can assign values to an instance using dot notation:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; blank.x = 3.0
&gt;&gt;&gt; blank.y = 4.0
</pre></div>
</div>
<p>This syntax is similar to the syntax for selecting a variable from a
module, such as <span><code class="docutils literal notranslate"><span class="pre">math.pi</span></code></span> or
<span><code class="docutils literal notranslate"><span class="pre">string.whitespace</span></code></span>. In this case, though, we are assigning
values to named elements of an object. These elements are called
<span><strong>attributes</strong></span>.</p>
<p>As a noun, “AT-trib-ute” is pronounced with emphasis on the first
syllable, as opposed to “a-TRIB-ute”, which is a verb.</p>
<p>Figure <a class="reference external" href="#fig.point">16.1</a> is a state diagram that shows the result of
these assignments. A state diagram that shows an object and its
attributes is called an <span><strong>object diagram</strong></span>.</p>
<p><img alt="Object diagram." src="_images/point.pdf" /></p>
<p>The variable <span><code class="docutils literal notranslate"><span class="pre">blank</span></code></span> refers to a Point object, which
contains two attributes. Each attribute refers to a floating-point
number.</p>
<p>You can read the value of an attribute using the same syntax:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; blank.y
4.0
&gt;&gt;&gt; x = blank.x
&gt;&gt;&gt; x
3.0
</pre></div>
</div>
<p>The expression <span><code class="docutils literal notranslate"><span class="pre">blank.x</span></code></span> means, “Go to the object
<span><code class="docutils literal notranslate"><span class="pre">blank</span></code></span> refers to and get the value of <span><code class="docutils literal notranslate"><span class="pre">x</span></code></span>.”
In the example, we assign that value to a variable named
<span><code class="docutils literal notranslate"><span class="pre">x</span></code></span>. There is no conflict between the variable
<span><code class="docutils literal notranslate"><span class="pre">x</span></code></span> and the attribute <span><code class="docutils literal notranslate"><span class="pre">x</span></code></span>.</p>
<p>You can use dot notation as part of any expression. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; &#39;(%g, %g)&#39; % (blank.x, blank.y)
&#39;(3.0, 4.0)&#39;
&gt;&gt;&gt; distance = math.sqrt(blank.x**2 + blank.y**2)
&gt;&gt;&gt; distance
5.0
</pre></div>
</div>
<p>You can pass an instance as an argument in the usual way. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def print_point(p):
    print(&#39;(%g, %g)&#39; % (p.x, p.y))
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">print_point</span></code> takes a point as an argument and displays it in
mathematical notation. To invoke it, you can pass <span><code class="docutils literal notranslate"><span class="pre">blank</span></code></span>
as an argument:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print_point(blank)
(3.0, 4.0)
</pre></div>
</div>
<p>Inside the function, <span><code class="docutils literal notranslate"><span class="pre">p</span></code></span> is an alias for
<span><code class="docutils literal notranslate"><span class="pre">blank</span></code></span>, so if the function modifies <span><code class="docutils literal notranslate"><span class="pre">p</span></code></span>,
<span><code class="docutils literal notranslate"><span class="pre">blank</span></code></span> changes.</p>
<p>As an exercise, write a function called <code class="docutils literal notranslate"><span class="pre">distance_between_points</span></code> that
takes two Points as arguments and returns the distance between them.</p>
</div>
<div class="section" id="rectangles">
<h2>Rectangles<a class="headerlink" href="#rectangles" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it is obvious what the attributes of an object should be, but
other times you have to make decisions. For example, imagine you are
designing a class to represent rectangles. What attributes would you use
to specify the location and size of a rectangle? You can ignore angle;
to keep things simple, assume that the rectangle is either vertical or
horizontal.</p>
<p>There are at least two possibilities:</p>
<ul class="simple">
<li><p>You could specify one corner of the rectangle (or the center), the
width, and the height.</p></li>
<li><p>You could specify two opposing corners.</p></li>
</ul>
<p>At this point it is hard to say whether either is better than the other,
so we’ll implement the first one, just as an example.</p>
<p>Here is the class definition:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>class Rectangle:
    &quot;&quot;&quot;Represents a rectangle. 

    attributes: width, height, corner.
    &quot;&quot;&quot;
</pre></div>
</div>
<p>The docstring lists the attributes: <span><code class="docutils literal notranslate"><span class="pre">width</span></code></span> and
<span><code class="docutils literal notranslate"><span class="pre">height</span></code></span> are numbers; <span><code class="docutils literal notranslate"><span class="pre">corner</span></code></span> is a Point
object that specifies the lower-left corner.</p>
<p>To represent a rectangle, you have to instantiate a Rectangle object and
assign values to the attributes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>box = Rectangle()
box.width = 100.0
box.height = 200.0
box.corner = Point()
box.corner.x = 0.0
box.corner.y = 0.0
</pre></div>
</div>
<p>The expression <span><code class="docutils literal notranslate"><span class="pre">box.corner.x</span></code></span> means, “Go to the object
<span><code class="docutils literal notranslate"><span class="pre">box</span></code></span> refers to and select the attribute named
<span><code class="docutils literal notranslate"><span class="pre">corner</span></code></span>; then go to that object and select the attribute
named <span><code class="docutils literal notranslate"><span class="pre">x</span></code></span>.”</p>
<p><img alt="Object diagram." src="_images/rectangle.pdf" /></p>
<p>Figure <a class="reference external" href="#fig.rectangle">16.2</a> shows the state of this object. An object
that is an attribute of another object is <span><strong>embedded</strong></span>.</p>
</div>
<div class="section" id="instances-as-return-values">
<h2>Instances as return values<a class="headerlink" href="#instances-as-return-values" title="Permalink to this headline">¶</a></h2>
<p>Functions can return instances. For example, <code class="docutils literal notranslate"><span class="pre">find_center</span></code> takes a
<span><code class="docutils literal notranslate"><span class="pre">Rectangle</span></code></span> as an argument and returns a
<span><code class="docutils literal notranslate"><span class="pre">Point</span></code></span> that contains the coordinates of the center of the
<span><code class="docutils literal notranslate"><span class="pre">Rectangle</span></code></span>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def find_center(rect):
    p = Point()
    p.x = rect.corner.x + rect.width/2
    p.y = rect.corner.y + rect.height/2
    return p
</pre></div>
</div>
<p>Here is an example that passes <span><code class="docutils literal notranslate"><span class="pre">box</span></code></span> as an argument and
assigns the resulting Point to <span><code class="docutils literal notranslate"><span class="pre">center</span></code></span>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; center = find_center(box)
&gt;&gt;&gt; print_point(center)
(50, 100)
</pre></div>
</div>
</div>
<div class="section" id="objects-are-mutable">
<h2>Objects are mutable<a class="headerlink" href="#objects-are-mutable" title="Permalink to this headline">¶</a></h2>
<p>You can change the state of an object by making an assignment to one of
its attributes. For example, to change the size of a rectangle without
changing its position, you can modify the values of <span><code class="docutils literal notranslate"> <span class="pre">width</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">height</span></code></span>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>box.width = box.width + 50
box.height = box.height + 100
</pre></div>
</div>
<p>You can also write functions that modify objects. For example,
<code class="docutils literal notranslate"><span class="pre">grow_rectangle</span></code> takes a Rectangle object and two numbers,
<span><code class="docutils literal notranslate"><span class="pre">dwidth</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">dheight</span></code></span>, and adds the numbers
to the width and height of the rectangle:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>def grow_rectangle(rect, dwidth, dheight):
    rect.width += dwidth
    rect.height += dheight
</pre></div>
</div>
<p>Here is an example that demonstrates the effect:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; box.width, box.height
(150.0, 300.0)
&gt;&gt;&gt; grow_rectangle(box, 50, 100)
&gt;&gt;&gt; box.width, box.height
(200.0, 400.0)
</pre></div>
</div>
<p>Inside the function, <span><code class="docutils literal notranslate"><span class="pre">rect</span></code></span> is an alias for
<span><code class="docutils literal notranslate"><span class="pre">box</span></code></span>, so when the function modifies <span><code class="docutils literal notranslate"><span class="pre">rect</span></code></span>,
<span><code class="docutils literal notranslate"><span class="pre">box</span></code></span> changes.</p>
<p>As an exercise, write a function named <code class="docutils literal notranslate"><span class="pre">move_rectangle</span></code> that takes a
Rectangle and two numbers named <span><code class="docutils literal notranslate"><span class="pre">dx</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">dy</span></code></span>.
It should change the location of the rectangle by adding
<span><code class="docutils literal notranslate"><span class="pre">dx</span></code></span> to the <span><code class="docutils literal notranslate"><span class="pre">x</span></code></span> coordinate of
<span><code class="docutils literal notranslate"><span class="pre">corner</span></code></span> and adding <span><code class="docutils literal notranslate"><span class="pre">dy</span></code></span> to the
<span><code class="docutils literal notranslate"><span class="pre">y</span></code></span> coordinate of <span><code class="docutils literal notranslate"><span class="pre">corner</span></code></span>.</p>
</div>
<div class="section" id="copying">
<h2>Copying<a class="headerlink" href="#copying" title="Permalink to this headline">¶</a></h2>
<p>Aliasing can make a program difficult to read because changes in one
place might have unexpected effects in another place. It is hard to keep
track of all the variables that might refer to a given object.</p>
<p>Copying an object is often an alternative to aliasing. The
<span><code class="docutils literal notranslate"><span class="pre">copy</span></code></span> module contains a function called
<span><code class="docutils literal notranslate"><span class="pre">copy</span></code></span> that can duplicate any object:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; p1 = Point()
&gt;&gt;&gt; p1.x = 3.0
&gt;&gt;&gt; p1.y = 4.0

&gt;&gt;&gt; import copy
&gt;&gt;&gt; p2 = copy.copy(p1)
</pre></div>
</div>
<p><span><code class="docutils literal notranslate"><span class="pre">p1</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">p2</span></code></span> contain the same data, but they
are not the same Point.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print_point(p1)
(3, 4)
&gt;&gt;&gt; print_point(p2)
(3, 4)
&gt;&gt;&gt; p1 is p2
False
&gt;&gt;&gt; p1 == p2
False
</pre></div>
</div>
<p>The <span><code class="docutils literal notranslate"><span class="pre">is</span></code></span> operator indicates that <span><code class="docutils literal notranslate"><span class="pre">p1</span></code></span> and
<span><code class="docutils literal notranslate"><span class="pre">p2</span></code></span> are not the same object, which is what we expected.
But you might have expected <span><code class="docutils literal notranslate"><span class="pre">==</span></code></span> to yield
<span><code class="docutils literal notranslate"><span class="pre">True</span></code></span> because these points contain the same data. In that
case, you will be disappointed to learn that for instances, the default
behavior of the <span><code class="docutils literal notranslate"><span class="pre">==</span></code></span> operator is the same as the
<span><code class="docutils literal notranslate"><span class="pre">is</span></code></span> operator; it checks object identity, not object
equivalence. That’s because for programmer-defined types, Python doesn’t
know what should be considered equivalent. At least, not yet.</p>
<p>If you use <span><code class="docutils literal notranslate"><span class="pre">copy.copy</span></code></span> to duplicate a Rectangle, you will
find that it copies the Rectangle object but not the embedded Point.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; box2 = copy.copy(box)
&gt;&gt;&gt; box2 is box
False
&gt;&gt;&gt; box2.corner is box.corner
True
</pre></div>
</div>
<p><img alt="Object diagram." src="_images/rectangle2.pdf" /></p>
<p>Figure <a class="reference external" href="#fig.rectangle2">16.3</a> shows what the object diagram looks like.
This operation is called a <span><strong>shallow copy</strong></span> because it
copies the object and any references it contains, but not the embedded
objects.</p>
<p>For most applications, this is not what you want. In this example,
invoking <code class="docutils literal notranslate"><span class="pre">grow_rectangle</span></code> on one of the Rectangles would not affect the
other, but invoking <code class="docutils literal notranslate"><span class="pre">move_rectangle</span></code> on either would affect both! This
behavior is confusing and error-prone.</p>
<p>Fortunately, the <span><code class="docutils literal notranslate"><span class="pre">copy</span></code></span> module provides a method named
<span><code class="docutils literal notranslate"> <span class="pre">deepcopy</span></code></span> that copies not only the object but also the
objects it refers to, and the objects <span><em>they</em></span> refer to, and
so on. You will not be surprised to learn that this operation is called
a <span><strong>deep copy</strong></span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; box3 = copy.deepcopy(box)
&gt;&gt;&gt; box3 is box
False
&gt;&gt;&gt; box3.corner is box.corner
False
</pre></div>
</div>
<p><span><code class="docutils literal notranslate"><span class="pre">box3</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">box</span></code></span> are completely separate
objects.</p>
<p>As an exercise, write a version of <code class="docutils literal notranslate"><span class="pre">move_rectangle</span></code> that creates and
returns a new Rectangle instead of modifying the old one.</p>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>When you start working with objects, you are likely to encounter some
new exceptions. If you try to access an attribute that doesn’t exist,
you get an <span><code class="docutils literal notranslate"><span class="pre">AttributeError</span></code></span>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; p = Point()
&gt;&gt;&gt; p.x = 3
&gt;&gt;&gt; p.y = 4
&gt;&gt;&gt; p.z
AttributeError: Point instance has no attribute &#39;z&#39;
</pre></div>
</div>
<p>If you are not sure what type an object is, you can ask:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; type(p)
&lt;class &#39;__main__.Point&#39;&gt;
</pre></div>
</div>
<p>You can also use <span><code class="docutils literal notranslate"><span class="pre">isinstance</span></code></span> to check whether an object is
an instance of a class:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; isinstance(p, Point)
True
</pre></div>
</div>
<p>If you are not sure whether an object has a particular attribute, you
can use the built-in function <span><code class="docutils literal notranslate"><span class="pre">hasattr</span></code></span>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; hasattr(p, &#39;x&#39;)
True
&gt;&gt;&gt; hasattr(p, &#39;z&#39;)
False
</pre></div>
</div>
<p>The first argument can be any object; the second argument is a <span>
<em>string</em></span> that contains the name of the attribute.</p>
<p>You can also use a <span><code class="docutils literal notranslate"><span class="pre">try</span></code></span> statement to see if the object has
the attributes you need:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>try:
    x = p.x
except AttributeError:
    x = 0
</pre></div>
</div>
<p>This approach can make it easier to write functions that work with
different types; more on that topic is coming up in
Section <a class="reference external" href="#polymorphism">18.9</a>.</p>
</div>
<div class="section" id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>class:<br />
A programmer-defined type. A class definition creates a new class
object.</p></li>
<li><p>class object:<br />
An object that contains information about a programmer-defined type.
The class object can be used to create instances of the type.</p></li>
<li><p>instance:<br />
An object that belongs to a class.</p></li>
<li><p>instantiate:<br />
To create a new object.</p></li>
<li><p>attribute:<br />
One of the named values associated with an object.</p></li>
<li><p>embedded object:<br />
An object that is stored as an attribute of another object.</p></li>
<li><p>shallow copy:<br />
To copy the contents of an object, including any references to
embedded objects; implemented by the <span><code class="docutils literal notranslate"><span class="pre">copy</span></code></span> function in
the <span><code class="docutils literal notranslate"><span class="pre">copy</span></code></span> module.</p></li>
<li><p>deep copy:<br />
To copy the contents of an object as well as any embedded objects,
and any objects embedded in them, and so on; implemented by the
<span><code class="docutils literal notranslate"><span class="pre">deepcopy</span></code></span> function in the <span><code class="docutils literal notranslate"><span class="pre">copy</span></code></span> module.</p></li>
<li><p>object diagram:<br />
A diagram that shows objects, their attributes, and the values of
the attributes.</p></li>
</ul>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h2>
<p>Write a definition for a class named <span><code class="docutils literal notranslate"><span class="pre">Circle</span></code></span> with
attributes <span><code class="docutils literal notranslate"><span class="pre">center</span></code></span> and <span><code class="docutils literal notranslate"><span class="pre">radius</span></code></span>, where
<span><code class="docutils literal notranslate"><span class="pre">center</span></code></span> is a Point object and radius is a number.</p>
<p>Instantiate a Circle object that represents a circle with its center at
((150, 100)) and radius 75.</p>
<p>Write a function named <code class="docutils literal notranslate"><span class="pre">point_in_circle</span></code> that takes a Circle and a Point
and returns True if the Point lies in or on the boundary of the circle.</p>
<p>Write a function named <code class="docutils literal notranslate"><span class="pre">rect_in_circle</span></code> that takes a Circle and a
Rectangle and returns True if the Rectangle lies entirely in or on the
boundary of the circle.</p>
<p>Write a function named <code class="docutils literal notranslate"><span class="pre">rect_circle_overlap</span></code> that takes a Circle and a
Rectangle and returns True if any of the corners of the Rectangle fall
inside the circle. Or as a more challenging version, return True if any
part of the Rectangle falls inside the circle.</p>
<p>Solution: <a class="reference external" href="http://thinkpython2.com/code/Circle.py">http://thinkpython2.com/code/Circle.py</a>.</p>
<p>Write a function called <code class="docutils literal notranslate"><span class="pre">draw_rect</span></code> that takes a Turtle object and a
Rectangle and uses the Turtle to draw the Rectangle. See
Chapter <a class="reference external" href="#turtlechap">5</a> for examples using Turtle objects.</p>
<p>Write a function called <code class="docutils literal notranslate"><span class="pre">draw_circle</span></code> that takes a Turtle and a Circle
and draws the Circle.</p>
<p>Solution: <a class="reference external" href="http://thinkpython2.com/code/draw.py">http://thinkpython2.com/code/draw.py</a>.</p>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="files.html" title="previous page">Files</a>
    <a class='right-next' id="next-link" href="classes_II.html" title="next page">Classes and functions</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Allan Downey<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="_static/js/index.js"></script>
    
  </body>
</html>